:ruby
  unit_id = current_user.unit_id || session[:unit_id]
  partner_not = params[:partner_type] == 'client' ? 'supplier' : 'client'
%p.close{:onclick => "trst.task.destroy()"}
%p.task_title= t("trst_partner.quick.#{params[:partner_type]}.title")
-if action == 'put'
  %form{:id  => "xhr_#{action}"}
    %table{:cellspacing => "0"}
      %thead
        %tr
          %th Câmp
          %th Valoare
      %tbody
        %tr.normal
          %td Nume scurt
          %td
            %input{:name => "[trst_partner][name][]", :value => @object.name[0]}
        %tr.normal
          %td Nume complet
          %td
            %input{:name => "[trst_partner][name][]", :value => @object.name[1]}
        %tr.normal
          %td Nume oficial
          %td
            %input{:name => "[trst_partner][name][]", :value => @object.name[2]}
        %tr.normal
          %td Cam.Comerţ
          %td
            %input{:name => "[trst_partner][identities][chambcom]", :value => @object.identities["chambcom"]}
        %tr.normal
          %td Cod fiscal
          %td
            %input{:name => "[trst_partner][identities][fiscal]", :value => @object.identities["fiscal"]}
        %tr.normal
          %td Localitate
          %td
            %input{:name => "[addresses][city]"}
        %tr.normal
          %td Strada
          %td
            %input{:name => "[addresses][street]"}
        %tr.normal
          %td Număr
          %td
            %input{:name => "[addresses][nr]"}
        %input{:type => "hidden", :name => "[trst_partner][#{partner_not}]", :value => "false"}
      %tfoot
        %tr
          %td{:class => "buttons_bottom", :colspan => "2"}
            %span{:class => "button save", :onclick => "trst.task.init('#{@task.id}','put','#{@object.id}')"}= t("button.save")
            %span{:class => "button delete", :onclick => "trst.task.init('#{@task.id}','delete','#{@object.id}')"}= t("button.delete")
        %tr
          %td.footer_note{:colspan => "2"}= "&nbsp;" #t('gen_footer.note')
-else
  %table{:cellspacing => "0"}
    %thead
      %tr
        %th= t("gen_warning.#{action}")
    %tbody
      %tr
        %td
          %p.ju{:style => "width:350px"}= t("gen_msg.#{action}", :data => "#{@object.name}")
    %tfoot
      %tr
        %td{:class => "buttons_bottom"}
          - current_buttons(action).each do |button|
            %span{:class => "button #{button}", :onclick => current_xhr(button,@task.id,action,"new",params)}<
              =t("button.#{button}")
